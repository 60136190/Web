{"ast":null,"code":"import _regeneratorRuntime from\"D:/Full-Stack-Developer/Build-Web-Orther-Food-Full-Stack-Widosoft/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Full-Stack-Developer/Build-Web-Orther-Food-Full-Stack-Widosoft/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Full-Stack-Developer/Build-Web-Orther-Food-Full-Stack-Widosoft/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createContext,useState,useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{GetAccountNewInitiate,InfoAdminInitiate,RefreshTokenInitiate}from\"../redux/Action/ActionAdmin\";import{ProductApi,AdminApi,InfoAllUserApi}from\"../Imports/Index\";import{GetAccountMuchInitiate}from\"../redux/Action/ActionInfoAllUser\";import{CompareMothBeforeInitiate,CompareMothTotalCancelBeforeInitiate,CompareMothTotalNotReceivedBeforeInitiate,ProductTotalCancelInitiate,ProductTotalInitiate,ProductTotalMothInitiate,ProductTotalNotReceivedInitiate,VoucherAllInitiate}from\"../redux/Action/ActionProduct\";import{jsx as _jsx}from\"react/jsx-runtime\";export var GlobalState=/*#__PURE__*/createContext();export var DataProvider=function DataProvider(_ref){var children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),callback=_useState2[0],setCallback=_useState2[1];var _useSelector=useSelector(function(state){return state.authAdmin;}),Admin=_useSelector.Admin,token=_useSelector.token;var dispatch=useDispatch();useEffect(function(){var firstLogin=localStorage.getItem(\"firstLogin\");if(firstLogin){var refreshToken=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(RefreshTokenInitiate(Admin.accessToken));setTimeout(function(){refreshToken();},10*60*1000);case 2:case\"end\":return _context.stop();}}},_callee);}));return function refreshToken(){return _ref2.apply(this,arguments);};}();refreshToken();}},[callback]);useEffect(function(){if(token.accessToken){dispatch(InfoAdminInitiate(token.accessToken));dispatch(GetAccountNewInitiate(token.accessToken));dispatch(GetAccountMuchInitiate(token.accessToken));dispatch(ProductTotalInitiate(token.accessToken));dispatch(VoucherAllInitiate(token.accessToken));dispatch(ProductTotalCancelInitiate(token.accessToken));dispatch(ProductTotalNotReceivedInitiate(token.accessToken));dispatch(ProductTotalMothInitiate(token.accessToken));dispatch(CompareMothBeforeInitiate(token.accessToken));dispatch(CompareMothTotalCancelBeforeInitiate(token.accessToken));dispatch(CompareMothTotalNotReceivedBeforeInitiate(token.accessToken));}},[token.accessToken,callback]);var data={callback:[callback,setCallback],AdminApi:AdminApi(token.accessToken,callback),ProductApi:ProductApi(callback),InfoAllUserApi:InfoAllUserApi(token,callback)};return/*#__PURE__*/_jsx(GlobalState.Provider,{value:data,children:children});};","map":{"version":3,"sources":["D:/Full-Stack-Developer/Build-Web-Orther-Food-Full-Stack-Widosoft/client/src/Contexts/GlobalState.js"],"names":["React","createContext","useState","useEffect","useDispatch","useSelector","GetAccountNewInitiate","InfoAdminInitiate","RefreshTokenInitiate","ProductApi","AdminApi","InfoAllUserApi","GetAccountMuchInitiate","CompareMothBeforeInitiate","CompareMothTotalCancelBeforeInitiate","CompareMothTotalNotReceivedBeforeInitiate","ProductTotalCancelInitiate","ProductTotalInitiate","ProductTotalMothInitiate","ProductTotalNotReceivedInitiate","VoucherAllInitiate","GlobalState","DataProvider","children","callback","setCallback","state","authAdmin","Admin","token","dispatch","firstLogin","localStorage","getItem","refreshToken","accessToken","setTimeout","data"],"mappings":"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","sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  GetAccountNewInitiate,\r\n  InfoAdminInitiate,\r\n  RefreshTokenInitiate,\r\n} from \"../redux/Action/ActionAdmin\";\r\nimport { ProductApi, AdminApi, InfoAllUserApi } from \"../Imports/Index\";\r\nimport { GetAccountMuchInitiate } from \"../redux/Action/ActionInfoAllUser\";\r\nimport {\r\n  CompareMothBeforeInitiate,\r\n  CompareMothTotalCancelBeforeInitiate,\r\n  CompareMothTotalNotReceivedBeforeInitiate,\r\n  ProductTotalCancelInitiate,\r\n  ProductTotalInitiate,\r\n  ProductTotalMothInitiate,\r\n  ProductTotalNotReceivedInitiate,\r\n  VoucherAllInitiate,\r\n} from \"../redux/Action/ActionProduct\";\r\nexport const GlobalState = createContext();\r\nexport const DataProvider = ({ children }) => {\r\n  const [callback, setCallback] = useState(false);\r\n  const { Admin, token } = useSelector((state) => state.authAdmin);\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    const firstLogin = localStorage.getItem(\"firstLogin\");\r\n    if (firstLogin) {\r\n      const refreshToken = async () => {\r\n        dispatch(RefreshTokenInitiate(Admin.accessToken));\r\n        setTimeout(() => {\r\n          refreshToken();\r\n        }, 10 * 60 * 1000);\r\n      };\r\n      refreshToken();\r\n    }\r\n  }, [callback]);\r\n  useEffect(() => {\r\n    if (token.accessToken) {\r\n      dispatch(InfoAdminInitiate(token.accessToken));\r\n      dispatch(GetAccountNewInitiate(token.accessToken));\r\n      dispatch(GetAccountMuchInitiate(token.accessToken));\r\n      dispatch(ProductTotalInitiate(token.accessToken));\r\n      dispatch(VoucherAllInitiate(token.accessToken));\r\n\r\n      dispatch(ProductTotalCancelInitiate(token.accessToken));\r\n      dispatch(ProductTotalNotReceivedInitiate(token.accessToken));\r\n      dispatch(ProductTotalMothInitiate(token.accessToken));\r\n\r\n      dispatch(CompareMothBeforeInitiate(token.accessToken));\r\n      dispatch(CompareMothTotalCancelBeforeInitiate(token.accessToken));\r\n      dispatch(CompareMothTotalNotReceivedBeforeInitiate(token.accessToken));\r\n    }\r\n  }, [token.accessToken, callback]);\r\n  const data = {\r\n    callback: [callback, setCallback],\r\n    AdminApi: AdminApi(token.accessToken, callback),\r\n    ProductApi: ProductApi(callback),\r\n    InfoAllUserApi: InfoAllUserApi(token, callback),\r\n  };\r\n  return <GlobalState.Provider value={data}>{children}</GlobalState.Provider>;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}