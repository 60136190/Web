{"ast":null,"code":"var _jsxFileName = \"D:\\\\Full-Stack-Developer\\\\Build-Web-Orther-Food-Full-Stack-Widosoft\\\\client\\\\src\\\\Contexts\\\\GlobalState.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { GetAccountNewInitiate, InfoAdminInitiate, RefreshTokenInitiate } from \"../redux/Action/ActionAdmin\";\nimport { ProductApi, AdminApi, InfoAllUserApi } from \"../Imports/Index\";\nimport { GetAccountMuchInitiate } from \"../redux/Action/ActionInfoAllUser\";\nimport { CompareMothBeforeInitiate, CompareMothTotalCancelBeforeInitiate, ProductTotalCancelInitiate, ProductTotalInitiate, ProductTotalMothInitiate, ProductTotalNotReceivedInitiate, VoucherAllInitiate } from \"../redux/Action/ActionProduct\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const GlobalState = /*#__PURE__*/createContext();\nexport const DataProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [callback, setCallback] = useState(false);\n  const {\n    Admin,\n    token\n  } = useSelector(state => state.authAdmin);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const firstLogin = localStorage.getItem(\"firstLogin\");\n\n    if (firstLogin) {\n      const refreshToken = async () => {\n        dispatch(RefreshTokenInitiate(Admin.accessToken));\n        setTimeout(() => {\n          refreshToken();\n        }, 10 * 60 * 1000);\n      };\n\n      refreshToken();\n    }\n  }, [callback]);\n  useEffect(() => {\n    if (token.accessToken) {\n      dispatch(InfoAdminInitiate(token.accessToken));\n      dispatch(GetAccountNewInitiate(token.accessToken));\n      dispatch(GetAccountMuchInitiate(token.accessToken));\n      dispatch(ProductTotalInitiate(token.accessToken));\n      dispatch(VoucherAllInitiate(token.accessToken));\n      dispatch(ProductTotalCancelInitiate(token.accessToken));\n      dispatch(ProductTotalNotReceivedInitiate(token.accessToken));\n      dispatch(ProductTotalMothInitiate(token.accessToken));\n      dispatch(CompareMothBeforeInitiate(token.accessToken));\n      dispatch(CompareMothTotalCancelBeforeInitiate(token.accessToken));\n    }\n  }, [token.accessToken, callback]);\n  const data = {\n    callback: [callback, setCallback],\n    AdminApi: AdminApi(token.accessToken, callback),\n    ProductApi: ProductApi(callback),\n    InfoAllUserApi: InfoAllUserApi(token, callback)\n  };\n  return /*#__PURE__*/_jsxDEV(GlobalState.Provider, {\n    value: data,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 10\n  }, this);\n};\n\n_s(DataProvider, \"H40/sOxN0LQN6n6m5qNOVqIQ5Qs=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = DataProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataProvider\");","map":{"version":3,"sources":["D:/Full-Stack-Developer/Build-Web-Orther-Food-Full-Stack-Widosoft/client/src/Contexts/GlobalState.js"],"names":["React","createContext","useState","useEffect","useDispatch","useSelector","GetAccountNewInitiate","InfoAdminInitiate","RefreshTokenInitiate","ProductApi","AdminApi","InfoAllUserApi","GetAccountMuchInitiate","CompareMothBeforeInitiate","CompareMothTotalCancelBeforeInitiate","ProductTotalCancelInitiate","ProductTotalInitiate","ProductTotalMothInitiate","ProductTotalNotReceivedInitiate","VoucherAllInitiate","GlobalState","DataProvider","children","callback","setCallback","Admin","token","state","authAdmin","dispatch","firstLogin","localStorage","getItem","refreshToken","accessToken","setTimeout","data"],"mappings":"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","sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  GetAccountNewInitiate,\r\n  InfoAdminInitiate,\r\n  RefreshTokenInitiate,\r\n} from \"../redux/Action/ActionAdmin\";\r\nimport { ProductApi, AdminApi, InfoAllUserApi } from \"../Imports/Index\";\r\nimport { GetAccountMuchInitiate } from \"../redux/Action/ActionInfoAllUser\";\r\nimport {\r\n  CompareMothBeforeInitiate,\r\n  CompareMothTotalCancelBeforeInitiate,\r\n  ProductTotalCancelInitiate,\r\n  ProductTotalInitiate,\r\n  ProductTotalMothInitiate,\r\n  ProductTotalNotReceivedInitiate,\r\n  VoucherAllInitiate,\r\n} from \"../redux/Action/ActionProduct\";\r\nexport const GlobalState = createContext();\r\nexport const DataProvider = ({ children }) => {\r\n  const [callback, setCallback] = useState(false);\r\n  const { Admin, token } = useSelector((state) => state.authAdmin);\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    const firstLogin = localStorage.getItem(\"firstLogin\");\r\n    if (firstLogin) {\r\n      const refreshToken = async () => {\r\n        dispatch(RefreshTokenInitiate(Admin.accessToken));\r\n        setTimeout(() => {\r\n          refreshToken();\r\n        }, 10 * 60 * 1000);\r\n      };\r\n      refreshToken();\r\n    }\r\n  }, [callback]);\r\n  useEffect(() => {\r\n    if (token.accessToken) {\r\n      dispatch(InfoAdminInitiate(token.accessToken));\r\n      dispatch(GetAccountNewInitiate(token.accessToken));\r\n      dispatch(GetAccountMuchInitiate(token.accessToken));\r\n      dispatch(ProductTotalInitiate(token.accessToken));\r\n      dispatch(VoucherAllInitiate(token.accessToken));\r\n\r\n      dispatch(ProductTotalCancelInitiate(token.accessToken));\r\n      dispatch(ProductTotalNotReceivedInitiate(token.accessToken));\r\n      dispatch(ProductTotalMothInitiate(token.accessToken));\r\n\r\n      dispatch(CompareMothBeforeInitiate(token.accessToken));\r\n      dispatch(CompareMothTotalCancelBeforeInitiate(token.accessToken));\r\n    }\r\n  }, [token.accessToken, callback]);\r\n  const data = {\r\n    callback: [callback, setCallback],\r\n    AdminApi: AdminApi(token.accessToken, callback),\r\n    ProductApi: ProductApi(callback),\r\n    InfoAllUserApi: InfoAllUserApi(token, callback),\r\n  };\r\n  return <GlobalState.Provider value={data}>{children}</GlobalState.Provider>;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}