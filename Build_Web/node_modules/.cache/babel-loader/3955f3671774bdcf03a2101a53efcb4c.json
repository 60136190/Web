{"ast":null,"code":"import _objectSpread from\"D:/Full-Stack-Developer/Build-Web-Orther-Food-Full-Stack-Widosoft/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/Full-Stack-Developer/Build-Web-Orther-Food-Full-Stack-Widosoft/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Full-Stack-Developer/Build-Web-Orther-Food-Full-Stack-Widosoft/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Full-Stack-Developer/Build-Web-Orther-Food-Full-Stack-Widosoft/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,useEffect,useContext}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import{LoginGoogle,Metadata}from\"../../Imports/Index\";import{useDispatch,useSelector}from\"react-redux\";import{loginInitiate}from\"../../redux/Action/ActionAdmin\";import{toast}from\"react-toastify\";import axios from\"axios\";import{GlobalState}from\"../../Contexts/GlobalState\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(flag){var _errors$email,_errors$email2,_errors$password;var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLock=_useState4[0],setIsLock=_useState4[1];var states=useContext(GlobalState);var _states$callback=_slicedToArray(states.callback,2),callback=_states$callback[0],setCallback=_states$callback[1];var _useForm=useForm(),register=_useForm.register,errors=_useForm.formState.errors,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch;var dispatch=useDispatch();var navigator=useNavigate();var passwords=useRef({});passwords.current=watch(\"password\");var _useSelector=useSelector(function(state){return state.authAdmin;}),Admin=_useSelector.Admin;var handleSubmitForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var email,password;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:email=data.email,password=data.password;dispatch(loginInitiate(email,password));case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmitForm(_x){return _ref.apply(this,arguments);};}();var handleIsLock=function handleIsLock(){setIsLock(!isLock);};useEffect(function(){if(Admin.status===200){navigator(\"/admin\");localStorage.setItem(\"firstLogin\",true);setCallback(!callback);toast.success(\"\".concat(Admin.message,\" \\uD83E\\uDD70\"));}else if(Admin.status===401){toast.error(Admin.message);}},[Admin]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{className:\"sign-in-form form-main\",onSubmit:handleSubmit(handleSubmitForm),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"Sign in\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loginGoogleFb\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login_google\",children:/*#__PURE__*/_jsx(LoginGoogle,{})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"email\",{required:true,pattern:/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/i})),{},{type:\"email\",placeholder:\"Email Address\",name:\"email\",id:\"email\"}))]}),/*#__PURE__*/_jsxs(\"span\",{style:{color:\"red\"},children:[((_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.type)===\"required\"&&\"Mời bạn nhập Email đầy đủ! \",(errors===null||errors===void 0?void 0:(_errors$email2=errors.email)===null||_errors$email2===void 0?void 0:_errors$email2.type)===\"pattern\"&&\"Email của ban không hợp lệ!\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[isLock?/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-unlock\",onClick:handleIsLock}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lock\",onClick:handleIsLock}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"password\",{required:true})),{},{type:isLock?\"type\":\"password\",placeholder:\"Password\",name:\"password\",id:\"password\"}))]}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:((_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.type)===\"required\"&&\"Mời bạn nhập đầy đủ mật khẩu. \"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",name:\"signin\",className:\"btn solid\"}),/*#__PURE__*/_jsx(\"p\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",marginTop:\"20px\"},children:/*#__PURE__*/_jsx(Link,{to:\"/forget\",children:/*#__PURE__*/_jsx(\"a\",{href:\"\",style:{color:\"#4590ef\"},children:\"Forgot Password?\"})})})]})});};export default Login;","map":{"version":3,"sources":["D:/Full-Stack-Developer/Build-Web-Orther-Food-Full-Stack-Widosoft/client/src/Components/Authentication/Login.js"],"names":["React","useState","useRef","useEffect","useContext","Link","useNavigate","useForm","LoginGoogle","Metadata","useDispatch","useSelector","loginInitiate","toast","axios","GlobalState","Login","flag","email","password","state","setState","isLock","setIsLock","states","callback","setCallback","register","errors","formState","handleSubmit","watch","dispatch","navigator","passwords","current","authAdmin","Admin","handleSubmitForm","data","handleIsLock","status","localStorage","setItem","success","message","error","required","pattern","color","type","display","justifyContent","alignItems","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect, useContext } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { LoginGoogle, Metadata } from \"../../Imports/Index\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { loginInitiate } from \"../../redux/Action/ActionAdmin\";\r\nimport { toast } from \"react-toastify\";\r\nimport axios from \"axios\";\r\nimport { GlobalState } from \"../../Contexts/GlobalState\";\r\nconst Login = (flag) => {\r\n  const [state, setState] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [isLock, setIsLock] = useState(false);\r\n  const states = useContext(GlobalState);\r\n  const [callback, setCallback] = states.callback;\r\n  const {\r\n    register,\r\n    formState: { errors },\r\n    handleSubmit,\r\n    watch,\r\n  } = useForm();\r\n  const dispatch = useDispatch();\r\n  const navigator = useNavigate();\r\n  const passwords = useRef({});\r\n  passwords.current = watch(\"password\");\r\n  const { Admin } = useSelector((state) => state.authAdmin);\r\n  const handleSubmitForm = async (data) => {\r\n    const { email, password } = data;\r\n    dispatch(loginInitiate(email, password));\r\n  };\r\n  const handleIsLock = () => {\r\n    setIsLock(!isLock);\r\n  };\r\n  useEffect(() => {\r\n    if (Admin.status === 200) {\r\n      navigator(\"/admin\");\r\n      localStorage.setItem(\"firstLogin\", true);\r\n      setCallback(!callback);\r\n      toast.success(`${Admin.message} 🥰`);\r\n    } else if (Admin.status === 401) {\r\n      toast.error(Admin.message);\r\n    }\r\n  }, [Admin]);\r\n  return (\r\n    <>\r\n      <form\r\n        className=\"sign-in-form form-main\"\r\n        onSubmit={handleSubmit(handleSubmitForm)}\r\n      >\r\n        <h2 className=\"title\">Sign in</h2>\r\n        <div className=\"loginGoogleFb\">\r\n          <div className=\"login_google\">\r\n            <LoginGoogle />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"input-field\">\r\n          <i className=\"fas fa-user\" />\r\n          <input\r\n            {...register(\"email\", {\r\n              required: true,\r\n              pattern: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/i,\r\n            })}\r\n            type=\"email\"\r\n            placeholder=\"Email Address\"\r\n            name=\"email\"\r\n            id=\"email\"\r\n          />\r\n        </div>\r\n        <span style={{ color: \"red\" }}>\r\n          {errors.email?.type === \"required\" && \"Mời bạn nhập Email đầy đủ! \"}\r\n          {errors?.email?.type === \"pattern\" && \"Email của ban không hợp lệ!\"}\r\n        </span>\r\n        <div className=\"input-field\">\r\n          {isLock ? (\r\n            <i className=\"fa fa-unlock\" onClick={handleIsLock} />\r\n          ) : (\r\n            <i className=\"fas fa-lock\" onClick={handleIsLock} />\r\n          )}\r\n          <input\r\n            {...register(\"password\", { required: true })}\r\n            type={isLock ? \"type\" : \"password\"}\r\n            placeholder=\"Password\"\r\n            name=\"password\"\r\n            id=\"password\"\r\n          />\r\n        </div>\r\n        <span style={{ color: \"red\" }}>\r\n          {errors.password?.type === \"required\" &&\r\n            \"Mời bạn nhập đầy đủ mật khẩu. \"}\r\n        </span>\r\n        <input type=\"submit\" name=\"signin\" className=\"btn solid\" />\r\n        <p\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            marginTop: \"20px\",\r\n          }}\r\n        >\r\n          <Link to=\"/forget\">\r\n            <a href=\"\" style={{ color: \"#4590ef\" }}>\r\n              Forgot Password?\r\n            </a>\r\n          </Link>\r\n        </p>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}